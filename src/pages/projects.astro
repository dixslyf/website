---
export const prerender = false;

import { motion } from "motion-v";

import { fetchGitHubProjects } from "@/utils/projects";
import { slideInProps } from "@/utils/animations";
import { RootLayout } from "@/layouts";
import { Grid } from "@/components/primitives";
import { RepoCard } from "@/components";

const repos = await fetchGitHubProjects();
---

<RootLayout>
  <Grid
    targetMinWidth="30rem"
    gap="var(--space-m)"
  >
    {
      repos.map((repo, idx) => (
        <motion.div
          client:load
          class="repoCardWrapper"
          {...slideInProps({ direction: "up", idx })}
        >
          <RepoCard
            client:load
            {repo}
          />
        </motion.div>
      ))
    }
  </Grid>
</RootLayout>

<style>
  .repoCardWrapper {
    /* Make the repo card take the full size of the wrapper. */
    display: grid;
  }
</style>
